import{_ as T,h as x,c as r,o as n,j as t,e as p,t as l,F as g,B as y,n as Q,p as _,v as A,ah as q,aj as D,a as w,b as P,G as I,ag as z}from"./chunks/framework.CjaFt1eW.js";const B={class:"card-body"},E={class:"contributor-info"},F={class:"user-header"},L=["src","alt"],U={key:1,class:"avatar avatar-placeholder"},H=["href"],O={key:3,class:"username unverified"},G={class:"stats-row"},J={class:"stat-item"},R={class:"stat-value"},W={class:"stat-item"},K={class:"stat-value"},X={key:0,class:"repos-list"},Z={class:"repos-tags"},tt=["href"],et={key:0,class:"more-tag"},st={__name:"ContributorCard",props:{contributor:{type:Object,required:!0},level:{type:String,required:!0,validator:u=>["outstanding","excellent","active"].includes(u)},rank:{type:Number,default:null}},setup(u){const m=u;x(()=>({outstanding:"🏆 卓越贡献者",excellent:"⭐ 优秀贡献者",active:"👥 活跃贡献者"})[m.level]||"");const d=a=>{if(!a)return"?";const i=a.charAt(0);return/[\u4e00-\u9fa5]/.test(i)?i:i.toUpperCase()};return(a,i)=>(n(),r("div",{class:Q(["contributor-card",`level-${u.level}`])},[t("div",B,[t("div",E,[t("div",F,[u.contributor.verified!==!1?(n(),r("img",{key:0,src:`https://github.com/${u.contributor.username}.png?size=48`,alt:u.contributor.username,class:"avatar"},null,8,L)):(n(),r("div",U,l(d(u.contributor.username)),1)),u.contributor.verified!==!1?(n(),r("a",{key:2,href:`https://github.com/${u.contributor.username}`,target:"_blank",class:"username"}," @"+l(u.contributor.username),9,H)):(n(),r("span",O,l(u.contributor.username),1))]),t("div",G,[t("div",J,[i[0]||(i[0]=t("span",{class:"stat-icon"},"✅",-1)),t("span",R,l(u.contributor.valid_commits),1),i[1]||(i[1]=t("span",{class:"stat-label"},"有效commit",-1))]),t("div",W,[i[2]||(i[2]=t("span",{class:"stat-icon"},"📦",-1)),t("span",K,l(u.contributor.repos_count),1),i[3]||(i[3]=t("span",{class:"stat-label"},"仓库",-1))])])]),u.contributor.repos&&u.contributor.repos.length>0?(n(),r("div",X,[i[4]||(i[4]=t("div",{class:"repos-title"},"参与仓库：",-1)),t("div",Z,[(n(!0),r(g,null,y(u.contributor.repos.slice(0,4),v=>(n(),r("a",{key:v,href:`https://github.com/datawhalechina/${v}`,target:"_blank",class:"repo-tag"},l(v),9,tt))),128)),u.contributor.repos.length>4?(n(),r("span",et," +"+l(u.contributor.repos.length-4),1)):p("",!0)])])):p("",!0)])],2))}},j=T(st,[["__scopeId","data-v-402e4f59"]]),at={class:"quarterly-contributors-container"},ot={class:"quarter-selector"},nt=["value"],lt=["value"],rt=["disabled","title"],it={key:0,class:"loading-state"},ut={key:1,class:"error-state"},ct={key:2,class:"empty-state"},dt={class:"empty-desc"},vt={key:3,class:"content"},ht={key:0,class:"stats-overview"},mt={class:"stat-card"},bt={class:"stat-content"},_t={class:"stat-value"},pt={class:"stat-desc"},gt={class:"stat-card"},yt={class:"stat-content"},ft={class:"stat-value"},$t={class:"stat-desc"},kt={class:"stat-card"},xt={class:"stat-content"},wt={class:"stat-value"},Ct={class:"stat-desc"},qt={key:1,class:"contributors-section"},Dt={class:"section-title"},Pt={class:"count-badge"},jt={class:"contributors-grid"},Tt={key:2,class:"contributors-section"},Qt={class:"section-title"},St={class:"count-badge"},Nt={class:"contributors-grid"},Vt={key:3,class:"update-info"},Mt={__name:"QuarterlyContributors",setup(u){const m=_(!0),d=_(null),a=_(null),i=_(new Date().getFullYear()),v=_(Math.floor((new Date().getMonth()+3)/3)),b=_(!1),S=x(()=>{const o=new Date().getFullYear(),e=[];for(let s=2024;s<=o;s++)e.push(s);return e.reverse()}),f=x(()=>{if(!a.value)return!1;const o=a.value.contributors;return o.outstanding&&o.outstanding.length>0||o.excellent&&o.excellent.length>0}),N=async()=>{if(!f.value)return;const o=a.value.contributors.outstanding||[],e=a.value.contributors.excellent||[];let s=`${i.value}Q${v.value}总贡献者有${a.value.meta.total_contributors}人，卓越贡献者${o.length}人，优秀贡献者${e.length}人，优秀&卓越开源贡献者名单如下：`;o.length>0&&(s+=`
【卓越贡献者】：${o.map(c=>c.username).join("、")}`),e.length>0&&(s+=`
【优秀贡献者】：${e.map(c=>c.username).join("、")}`);try{await navigator.clipboard.writeText(s),b.value=!0,setTimeout(()=>{b.value=!1},2e3)}catch{const c=document.createElement("textarea");c.value=s,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c),b.value=!0,setTimeout(()=>{b.value=!1},2e3)}},V=o=>new Date(o).toLocaleString("zh-CN"),M=async(o,e)=>{try{const s="/members-visualization/",c=`quarterly_contributors_${o}_Q${e}.json`,h=`${s}data/datawhalechina/${c}`.replace(/\/+/g,"/"),k=await fetch(h,{method:"HEAD"});if(!k.ok)return!1;const C=k.headers.get("content-type");return C&&C.includes("application/json")}catch{return!1}},Y=async()=>{const o=new Date().getFullYear(),e=Math.floor((new Date().getMonth()+3)/3);for(let s=o;s>=2024;s--){const c=s===o?e:4;for(let h=c;h>=1;h--)if(await M(s,h))return{year:s,quarter:h}}return{year:o,quarter:e}},$=async()=>{try{m.value=!0,d.value=null,a.value=null;const o="/members-visualization/",e=`quarterly_contributors_${i.value}_Q${v.value}.json`,s=`${o}data/datawhalechina/${e}`.replace(/\/+/g,"/"),c=await fetch(s);if(!c.ok){a.value=null;return}const h=c.headers.get("content-type");if(!h||!h.includes("application/json")){a.value=null;return}a.value=await c.json()}catch(o){o instanceof SyntaxError?a.value=null:(d.value=o.message,console.error("加载季度贡献者数据失败:",o))}finally{m.value=!1}};return A(async()=>{const o=await Y();i.value=o.year,v.value=o.quarter,await $()}),(o,e)=>(n(),r("div",at,[t("div",ot,[e[2]||(e[2]=t("label",null,"选择季度：",-1)),q(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),onChange:$},[(n(!0),r(g,null,y(S.value,s=>(n(),r("option",{key:s,value:s},l(s)+"年 ",9,nt))),128))],544),[[D,i.value]]),q(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),onChange:$},[(n(),r(g,null,y([1,2,3,4],s=>t("option",{key:s,value:s}," 第"+l(s)+"季度 ",9,lt)),64))],544),[[D,v.value]]),t("button",{class:Q(["copy-btn",{disabled:!f.value,copied:b.value}]),disabled:!f.value,title:f.value?"复制优秀&卓越贡献者名单":"暂无数据",onClick:N},l(b.value?"✅ 已复制":"📋 复制名单"),11,rt)]),m.value?(n(),r("div",it,[...e[3]||(e[3]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"正在加载季度贡献者数据...",-1)])])):d.value?(n(),r("div",ut,[t("p",null,"❌ 加载失败: "+l(d.value),1),t("button",{onClick:$,class:"retry-btn"},"重试")])):a.value?(n(),r("div",vt,[a.value?(n(),r("div",ht,[t("div",mt,[e[8]||(e[8]=t("div",{class:"stat-icon"},"👥",-1)),t("div",bt,[t("div",_t,l(a.value.meta.total_contributors),1),e[7]||(e[7]=t("div",{class:"stat-label"},"总贡献者",-1)),t("div",pt,l(i.value)+"年Q"+l(v.value),1)])]),t("div",gt,[e[10]||(e[10]=t("div",{class:"stat-icon"},"🏆",-1)),t("div",yt,[t("div",ft,l(a.value.meta.outstanding_count),1),e[9]||(e[9]=t("div",{class:"stat-label"},"卓越贡献者",-1)),t("div",$t,"≥"+l(a.value.meta.thresholds.outstanding)+"次有效commit",1)])]),t("div",kt,[e[12]||(e[12]=t("div",{class:"stat-icon"},"⭐",-1)),t("div",xt,[t("div",wt,l(a.value.meta.excellent_count),1),e[11]||(e[11]=t("div",{class:"stat-label"},"优秀贡献者",-1)),t("div",Ct,"≥"+l(a.value.meta.thresholds.excellent)+"次有效commit",1)])])])):p("",!0),a.value&&a.value.contributors.outstanding.length>0?(n(),r("div",qt,[t("h2",Dt,[e[13]||(e[13]=t("span",{class:"title-icon"},"🏆",-1)),e[14]||(e[14]=w(" 卓越贡献者 ",-1)),t("span",Pt,l(a.value.contributors.outstanding.length),1)]),t("div",jt,[(n(!0),r(g,null,y(a.value.contributors.outstanding,s=>(n(),P(j,{key:s.username,contributor:s,level:"outstanding"},null,8,["contributor"]))),128))])])):p("",!0),a.value&&a.value.contributors.excellent.length>0?(n(),r("div",Tt,[t("h2",Qt,[e[15]||(e[15]=t("span",{class:"title-icon"},"⭐",-1)),e[16]||(e[16]=w(" 优秀贡献者 ",-1)),t("span",St,l(a.value.contributors.excellent.length),1)]),t("div",Nt,[(n(!0),r(g,null,y(a.value.contributors.excellent,s=>(n(),P(j,{key:s.username,contributor:s,level:"excellent"},null,8,["contributor"]))),128))])])):p("",!0),a.value?(n(),r("div",Vt,[t("p",null,"📅 数据生成时间："+l(V(a.value.meta.generated_at)),1),t("p",null,"💡 有效commit定义：至少包含一个文件新增行数 ≥ "+l(a.value.meta.thresholds.valid_commit_threshold)+" 行",1)])):p("",!0)])):(n(),r("div",ct,[e[4]||(e[4]=t("div",{class:"empty-icon"},"📭",-1)),e[5]||(e[5]=t("p",{class:"empty-title"},"暂无数据",-1)),t("p",dt,l(i.value)+"年第"+l(v.value)+"季度的数据尚未生成",1),e[6]||(e[6]=t("p",{class:"empty-hint"},"请选择其他季度查看",-1))]))]))}},Yt=T(Mt,[["__scopeId","data-v-88e52d70"]]),zt=JSON.parse('{"title":"季度贡献者","description":"Datawhale 季度贡献者统计与展示","frontmatter":{"layout":"doc","title":"季度贡献者","description":"Datawhale 季度贡献者统计与展示"},"headers":[],"relativePath":"quarterly.md","filePath":"quarterly.md","lastUpdated":1770347156000}'),At={name:"quarterly.md"},Bt=Object.assign(At,{setup(u){return(m,d)=>(n(),r("div",null,[d[0]||(d[0]=t("h1",{id:"🎖️-季度贡献者",tabindex:"-1"},[w("🎖️ 季度贡献者 "),t("a",{class:"header-anchor",href:"#🎖️-季度贡献者","aria-label":'Permalink to "🎖️ 季度贡献者"'},"​")],-1)),I(Yt),d[1]||(d[1]=z('<hr><h2 id="📖-说明" tabindex="-1">📖 说明 <a class="header-anchor" href="#📖-说明" aria-label="Permalink to &quot;📖 说明&quot;">​</a></h2><h3 id="评选标准" tabindex="-1">评选标准 <a class="header-anchor" href="#评选标准" aria-label="Permalink to &quot;评选标准&quot;">​</a></h3><ul><li><strong>🏆 卓越贡献者</strong>：有效commit次数 ≥ 50次</li><li><strong>⭐ 优秀贡献者</strong>：有效commit次数 ≥ 10次</li></ul><h3 id="有效commit定义" tabindex="-1">有效commit定义 <a class="header-anchor" href="#有效commit定义" aria-label="Permalink to &quot;有效commit定义&quot;">​</a></h3><p>有效commit是指至少包含一个文件新增行数 ≥ 10行的commit。</p><p>这个标准旨在识别实质性的代码贡献，过滤掉仅包含小修改（如typo修复、格式调整）的提交。</p><h3 id="数据来源" tabindex="-1">数据来源 <a class="header-anchor" href="#数据来源" aria-label="Permalink to &quot;数据来源&quot;">​</a></h3><p>数据通过 GitHub API 自动采集，统计范围包括 Datawhale 组织下所有公开仓库的贡献记录。</p><h3 id="更新频率" tabindex="-1">更新频率 <a class="header-anchor" href="#更新频率" aria-label="Permalink to &quot;更新频率&quot;">​</a></h3><p>季度数据在每个季度结束后手动生成和更新。</p>',11))]))}});export{zt as __pageData,Bt as default};
