import{_ as B,h as M,c as i,o as n,j as e,t as r,e as w,n as P,F as N,B as T,N as F,p as x,b as U,a as E,q as K,P as I,v as Z,ah as W,aj as Y,ak as et,G as J,g as st,ag as at}from"./chunks/framework.CjaFt1eW.js";const ot={class:"rank-badge"},nt={key:0,class:"medal"},lt={key:1,class:"rank-number"},it={class:"avatar-section"},rt=["src","alt"],ct={key:1,class:"leaderboard-indicator"},dt={class:"member-info"},ut={class:"name-section"},mt={class:"member-name"},gt={class:"member-meta"},ht={key:0,class:"location"},vt={key:1,class:"company"},pt={key:0,class:"domains-section"},bt={class:"domains"},yt={class:"score-section"},_t={class:"score-value"},ft={class:"score-label"},kt={class:"detailed-stats"},$t={key:0,class:"stat-item",title:"Followers"},wt={class:"stat-value"},Dt={key:1,class:"stat-item",title:"ç»„ç»‡ä»“åº“æ€»Stars"},Ct={class:"stat-value"},xt={key:2,class:"stat-item",title:"å‚ä¸ç»„ç»‡ä»“åº“æ•°"},St={class:"stat-value"},Mt={class:"actions-section"},Ot=["href","title"],Pt={__name:"LeaderboardItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},colorScheme:{type:String,default:"blue"},showTrend:{type:Boolean,default:!1},icon:{type:String,default:""},animationDelay:{type:Number,default:0}},setup(o){const g=o,m=M(()=>{const v=g.member.name;return v&&v!=="null"&&v!=="undefined"&&v!=="None"&&v.trim()!==""?v:g.member.id||"æœªçŸ¥ç”¨æˆ·"}),c=v=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[v]||v,f=v=>{const b="/members-visualization/",S=`${b}default-avatar.svg`.replace(/\/+/g,"/");return v?v.startsWith("avatars/")?`${b}${v}`.replace(/\/+/g,"/"):v.startsWith("http")?v:`${b}${v}`.replace(/\/+/g,"/"):S},D=v=>{const b="/members-visualization/";v.target.src=`${b}default-avatar.svg`.replace(/\/+/g,"/")},k=v=>v?v.split(";").map(b=>b.trim()).filter(b=>b):[],h=()=>{const v=["up","down","stable"];return v[Math.floor(Math.random()*v.length)]},C=()=>{const v=h();return{up:"ğŸ“ˆ",down:"ğŸ“‰",stable:"â¡ï¸"}[v]||"â¡ï¸"};return(v,b)=>(n(),i("div",{class:P(["leaderboard-item leaderboard-item-base",[`rank-${o.rank}`,`theme-${o.colorScheme}`]]),style:F({animationDelay:`${o.animationDelay}ms`})},[e("div",ot,[o.rank<=3?(n(),i("span",nt,r(c(o.rank)),1)):(n(),i("span",lt,r(o.rank),1))]),e("div",it,[e("img",{src:f(o.member.avatar),alt:m.value,class:"avatar",onError:D},null,40,rt),o.showTrend?(n(),i("div",{key:0,class:P(["trend-indicator",h()])},r(C()),3)):o.icon?(n(),i("div",ct,r(o.icon),1)):w("",!0)]),e("div",dt,[e("div",ut,[e("h4",mt,r(m.value),1),e("div",gt,[o.member.location?(n(),i("span",ht,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",vt,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",pt,[e("div",bt,[(n(!0),i(N,null,T(k(o.member.domain),S=>(n(),i("span",{key:S,class:"domain-tag"},r(S),1))),128))])])):w("",!0)]),e("div",yt,[e("div",_t,r(Math.round(o.member.score||0)),1),e("div",ft,r(o.member.scoreDisplay||"åˆ†æ•°"),1),e("div",kt,[o.member.followers?(n(),i("div",$t,[b[0]||(b[0]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",wt,r(o.member.followers),1)])):w("",!0),o.member.org_total_stars?(n(),i("div",Dt,[b[1]||(b[1]=e("span",{class:"stat-icon"},"â­",-1)),e("span",Ct,r(o.member.org_total_stars),1)])):w("",!0),o.member.org_repos_count?(n(),i("div",xt,[b[2]||(b[2]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",St,r(o.member.org_repos_count),1)])):w("",!0)])]),e("div",Mt,[e("a",{href:o.member.github,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:`è®¿é—® ${m.value} çš„ GitHub`},[...b[3]||(b[3]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ot)])],6))}},Nt=B(Pt,[["__scopeId","data-v-e0b0a065"]]),Tt={class:"card-header card-header-base"},Ht={class:"title-section title-section-base"},Vt={class:"icon icon-base"},zt={class:"title title-base"},qt={class:"description description-base"},jt={class:"stats-badge"},At={class:"count"},Et={class:"leaderboard-content"},Rt={key:0,class:"empty-state"},Bt={key:1,class:"members-list"},Lt={class:"card-footer"},Ft={class:"ranking-info"},Gt={key:0},Ut={key:1},Wt={__name:"LeaderboardCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"ğŸ†"},members:{type:Array,default:()=>[]},colorScheme:{type:String,default:"blue",validator:o=>["fire","blue","green","purple","gold"].includes(o)},showTrend:{type:Boolean,default:!1}},setup(o){const g=o,m=x(!1),c=M(()=>m.value?g.members:g.members.slice(0,5)),f=()=>{m.value=!m.value};return(D,k)=>{var h,C,v;return n(),i("div",{class:P(["leaderboard-card leaderboard-card-base",`theme-${o.colorScheme}`])},[e("div",Tt,[e("div",Ht,[e("span",Vt,r(o.icon),1),e("div",null,[e("h3",zt,r(o.title),1),e("p",qt,r(o.description),1)])]),e("div",jt,[e("span",At,r(o.members.length),1),k[0]||(k[0]=e("span",{class:"label"},"äººä¸Šæ¦œ",-1))])]),e("div",Et,[o.members.length===0?(n(),i("div",Rt,[...k[1]||(k[1]=[e("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æˆå‘˜",-1)])])):(n(),i("div",Bt,[(n(!0),i(N,null,T(c.value,(b,S)=>(n(),U(Nt,{key:b.id,member:b,rank:b.rank,"color-scheme":o.colorScheme,"show-trend":o.showTrend,icon:o.icon,"animation-delay":S*100},null,8,["member","rank","color-scheme","show-trend","icon","animation-delay"]))),128))]))]),e("div",Lt,[e("div",Ft,[o.members.length>0?(n(),i("span",Gt," å† å†›ï¼š"+r(((h=o.members[0])==null?void 0:h.name)||((C=o.members[0])==null?void 0:C.id)),1)):w("",!0),o.members.length>1?(n(),i("span",Ut," æœ€é«˜åˆ†ï¼š"+r(Math.round(((v=o.members[0])==null?void 0:v.score)||0)),1)):w("",!0)]),o.members.length>5?(n(),i("button",{key:0,onClick:f,class:"expand-btn"},[E(r(m.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:m.value}])},"â–¼",2)])):w("",!0)])],2)}}},Jt=B(Wt,[["__scopeId","data-v-6e65b0db"]]),Zt={class:"rank-badge"},Qt={key:0,class:"medal"},Yt={key:1,class:"rank-number"},Xt={class:"avatar-section"},Kt=["src","alt"],It={class:"member-info"},te={class:"name-section"},ee={class:"member-name"},se={class:"member-meta"},ae={key:0,class:"location"},oe={key:1,class:"company"},ne={key:0,class:"domains-section"},le={class:"domains"},ie={class:"daily-chart-section"},re={class:"daily-chart"},ce=["title"],de={key:0,class:"bar-fill"},ue={class:"score-section"},me={class:"score-value"},ge={class:"score-label"},he={class:"detailed-stats"},ve={key:0,class:"stat-item"},pe={class:"stat-value"},be={key:1,class:"stat-item"},ye={class:"stat-value"},_e={key:2,class:"stat-item"},fe={class:"stat-value"},ke={class:"popup-header"},$e={class:"popup-content"},we={class:"top-sections"},De={class:"detail-section stats-section"},Ce={key:0,class:"detail-section repos-section"},xe={class:"repo-tags"},Se=["href","title"],Me={key:0,class:"detail-section"},Oe={class:"commit-messages"},Pe=["href","title"],Ne={class:"commit-text"},Te={class:"commit-meta"},He={class:"repo-link"},Ve={class:"actions-section"},ze=["href"],qe={__name:"WeeklyCommitItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(o,{emit:g}){const m=a=>a?a.split(";").map(t=>t.trim()).filter(Boolean):[],c=o,f=a=>{a.target.closest&&(a.target.closest(".github-link")||a.target.closest(".details-popup"))||D("toggle-details",c.member.user_key)},D=g,k=x(null),h=x(null),C=x("bottom"),v=async()=>{if(!c.showDetails||(await I(),!h.value))return;const a=h.value.closest(".leaderboard-content")||h.value.closest(".commits-list")||h.value.closest(".weekly-commits-card");if(!a){C.value="bottom";return}const t=a.querySelectorAll(".weekly-commit-item"),s=Array.from(t).indexOf(h.value),u=t.length;if(s>=u-2){C.value="top";return}const y=h.value.getBoundingClientRect(),p=a.getBoundingClientRect(),H=320,q=20,R=p.bottom-y.bottom,L=y.top-p.top;R<H+q&&L>H+q?C.value="top":C.value="bottom"};K(()=>c.showDetails,a=>{a&&v()});const b=M(()=>{const a=c.member.name;return a&&a!=="null"&&a!=="undefined"&&a!=="None"&&a.trim()!==""?a:c.member.id?c.member.id:c.member.display_name||c.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),S=a=>{const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0");return`${t}-${s}-${u}`},O=M(()=>{const a=c.member.daily_commits?Object.keys(c.member.daily_commits):[];let t=new Date;if(a.length){const u=a.map(y=>new Date(y)).filter(y=>!isNaN(y));u.length&&(t=u.sort((y,p)=>y-p)[u.length-1])}const s=[];for(let u=6;u>=0;u--){const y=new Date(t);y.setDate(y.getDate()-u),s.push(S(y))}return s}),z=M(()=>{const a=c.member.daily_commits||{};return O.value.map(t=>{const s=Object.prototype.hasOwnProperty.call(a,t),u=s&&a[t]||0;return{date:t,count:u,hasData:s}})}),j=M(()=>{const a=[],t=c.member.total_commits,s=c.member.repo_count,u=c.member.active_days;return typeof t=="number"&&a.push(`${t} æ¬¡`),typeof s=="number"&&a.push(`${s} ä»“åº“`),typeof u=="number"&&a.push(`${u} å¤©`),a.join(" â€¢ ")}),V=a=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[a]||a,A=a=>{const t="/members-visualization/",s=`${t}default-avatar.svg`.replace(/\/+/g,"/");return a?a.startsWith("avatars/")?`${t}${a}`.replace(/\/+/g,"/"):a.startsWith("http")?a:`${t}${a}`.replace(/\/+/g,"/"):s},d=a=>{const t="/members-visualization/";a.target.src=`${t}default-avatar.svg`.replace(/\/+/g,"/")},l=a=>{const t=z.value.filter(u=>u.hasData).map(u=>u.count),s=t.length?Math.max(...t):0;return s>0?a/s*100:0},_=()=>{const a=c.member.avg_commits_per_day||0,t=c.member.active_days||0;return a>=3&&t>=5?"up":a>=2&&t>=3?"stable":"down"},$=()=>{const a=_();return{up:"ğŸ“ˆ",stable:"â¡ï¸",down:"ğŸ“‰"}[a]||"â¡ï¸"};return(a,t)=>{var s,u,y;return n(),i("div",{ref_key:"itemRef",ref:h,class:P(["weekly-commit-item leaderboard-item-base",[`rank-${o.rank}`,{"is-expanded":c.showDetails}]]),style:F({animationDelay:`${o.animationDelay}ms`}),onClick:f},[e("div",Zt,[o.rank<=3?(n(),i("span",Qt,r(V(o.rank)),1)):(n(),i("span",Yt,r(o.rank),1))]),e("div",Xt,[e("img",{src:A(o.member.avatar),alt:b.value,class:"avatar",onError:d},null,40,Kt),t[1]||(t[1]=e("div",{class:"fire-indicator"},"ğŸ”¥",-1))]),e("div",It,[e("div",te,[e("h4",ee,r(b.value),1),e("div",se,[o.member.location?(n(),i("span",ae,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",oe,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",ne,[e("div",le,[(n(!0),i(N,null,T(m(o.member.domain),p=>(n(),i("span",{key:p,class:"domain-tag"},r(p),1))),128))])])):w("",!0)]),e("div",ie,[t[2]||(t[2]=e("div",{class:"chart-title"},"æ¯æ—¥åˆ†å¸ƒ",-1)),e("div",re,[(n(!0),i(N,null,T(z.value,p=>(n(),i("div",{key:p.date,class:P(p.hasData?"day-bar":"day-dash"),style:F(p.hasData?{height:`${l(p.count)}%`}:{}),title:p.hasData?`${p.date}: ${p.count} commits`:`${p.date}: æ— æ•°æ®`},[p.hasData?(n(),i("div",de)):w("",!0)],14,ce))),128))])]),e("div",ue,[e("div",me,r(o.member.score),1),e("div",ge,r(j.value),1),e("div",he,[o.member.followers?(n(),i("div",ve,[t[3]||(t[3]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",pe,r(o.member.followers),1)])):w("",!0),o.member.total_stars?(n(),i("div",be,[t[4]||(t[4]=e("span",{class:"stat-icon"},"â­",-1)),e("span",ye,r(o.member.total_stars),1)])):w("",!0),o.member.public_repos?(n(),i("div",_e,[t[5]||(t[5]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",fe,r(o.member.public_repos),1)])):w("",!0)]),e("div",{class:P(["trend-indicator",_()])},r($()),3)]),c.showDetails?(n(),i("div",{key:0,ref_key:"popupRef",ref:k,class:P(["details-popup",`popup-${C.value}`])},[e("div",ke,[e("h5",null,r(b.value)+" çš„æœ¬å‘¨æˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=p=>D("toggle-details",c.member.user_key)),class:"close-btn"},"Ã—")]),e("div",$e,[e("div",we,[e("div",De,[t[6]||(t[6]=e("h6",null,"ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ",-1)),e("ul",null,[e("li",null,"æ€»commitæ•°ï¼š"+r(o.member.total_commits),1),e("li",null,"å‚ä¸ä»“åº“ï¼š"+r(o.member.repo_count)+" ä¸ª",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(o.member.active_days)+" å¤©",1),e("li",null,"å¹³å‡æ¯æ—¥ï¼š"+r((s=o.member.avg_commits_per_day)==null?void 0:s.toFixed(1))+" commits",1)])]),(u=o.member.repos)!=null&&u.length?(n(),i("div",Ce,[t[8]||(t[8]=e("h6",null,"ğŸ“ ä¸»è¦ä»“åº“",-1)),e("div",xe,[(n(!0),i(N,null,T(o.member.repos.slice(0,5),p=>(n(),i("a",{key:p,href:`https://github.com/datawhalechina/${p}`,target:"_blank",rel:"noopener noreferrer",class:"repo-tag repo-link-tag",title:`è®¿é—®ä»“åº“: ${p}`},[E(r(p)+" ",1),t[7]||(t[7]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"10",height:"10"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))],8,Se))),128))])])):w("",!0)]),(y=o.member.commit_messages)!=null&&y.length?(n(),i("div",Me,[t[10]||(t[10]=e("h6",null,"ğŸ’¬ æœ€è¿‘æäº¤",-1)),e("div",Oe,[(n(!0),i(N,null,T(o.member.commit_messages.slice(0,3),p=>(n(),i("div",{key:p.url,class:"commit-message"},[e("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${p.message}`},[e("div",Ne,r(p.message),1),e("div",Te,[e("span",He,r(p.repo),1),E(" â€¢ "+r(p.date)+" ",1),t[9]||(t[9]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Pe)]))),128))])])):w("",!0)])],2)):w("",!0),e("div",Ve,[o.member.github_username?(n(),i("a",{key:0,href:`https://github.com/${o.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[11]||(t[11]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,ze)):w("",!0)]),t[12]||(t[12]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6)}}},je=B(qe,[["__scopeId","data-v-1543a12a"]]);function Ae(o){let g=o;g.charCodeAt(0)===65279&&(g=g.slice(1));const m=g.trim().split(`
`);if(m.length<2)return[];const c=m[0].split(",").map(D=>D.trim().replace(/^["']|["']$/g,"").replace(/^\uFEFF/,"")),f=[];for(let D=1;D<m.length;D++){const k=m[D].trim();if(!k)continue;const h=[];let C="",v=!1;for(let S=0;S<k.length;S++){const O=k[S];O==='"'?v=!v:O===","&&!v?(h.push(C.trim()),C=""):C+=O}h.push(C.trim());const b={};c.forEach((S,O)=>{b[S]=h[O]||""}),f.push(b)}return f}function tt(o){const g=new Set;return o.forEach((m,c)=>{if(m.id&&m.id.trim()){const f=m.id.trim();g.add(f),c<5&&console.log(`  - Extracted username: ${f}`)}}),g}async function X(o="/data/datawhale_member.csv"){try{console.log(`Loading organization members from: ${o}`);const g=await fetch(o);if(!g.ok)throw new Error(`Failed to fetch CSV: ${g.status}`);const m=await g.text(),c=Ae(m),f=tt(c);return console.log(`Loaded ${f.size} organization members from CSV`),f}catch(g){return console.error("Error loading organization members:",g),new Set}}async function Ee(o="/data/datawhale_member.json"){try{console.log(`Loading organization members from: ${o}`);const g=await fetch(o);if(!g.ok){console.warn("JSON file not found, trying CSV file instead");const f=o.replace(".json",".csv");return await X(f)}const m=await g.json(),c=tt(m);return console.log(`Loaded ${c.size} organization members from JSON`),c}catch(g){console.error("Error loading organization members from JSON:",g);try{const m=o.replace(".json",".csv");return console.log(`Falling back to CSV file: ${m}`),await X(m)}catch(m){return console.error("Error loading organization members from CSV:",m),new Set}}}function Q(o,g){return!o||!g?!1:g.has(o)}const Re={class:"card-header card-header-base"},Be={class:"stats-badge"},Le={class:"count"},Fe={class:"update-info-section"},Ge={class:"time-info"},Ue={class:"update-time"},We={class:"leaderboard-content"},Je={key:0,class:"loading-state"},Ze={key:1,class:"error-state"},Qe={key:2,class:"empty-state"},Ye={key:0},Xe={key:1},Ke={key:2,class:"empty-hint"},Ie={key:3,class:"empty-hint"},ts={key:3,class:"commits-list"},es={key:0,class:"card-footer"},ss={class:"ranking-info"},as={__name:"WeeklyCommitsCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(o){const g=o,m=x(!0),c=x(null),f=x(null),D=x(!1),k=x(null),h=M(()=>{var $;if(!(($=f.value)!=null&&$.user_commits))return[];const d=[];let l=0;for(const[a,t]of Object.entries(f.value.user_commits))if(t.total_commits>=1){const s=g.membersData.find(y=>y.id===a);if(g.showOnlyOrgMembers){const y=!!s,p=Q(a,g.organizationMembers);if(l<3&&(console.log(`ğŸ”¥ ä¸€å‘¨å·ç‹æ¦œ - æ£€æŸ¥ç”¨æˆ· ${a}:`,{hasMemberInfo:y,isOrgMember:p,hasAvatar:s==null?void 0:s.avatar,passed:y&&p}),l++),!s||!p)continue}const u={user_key:a,id:(s==null?void 0:s.id)||a,name:(s==null?void 0:s.name)||null,display_name:S(a,s),github_username:O(a),avatar:(s==null?void 0:s.avatar)||null,location:(s==null?void 0:s.location)||null,company:(s==null?void 0:s.company)||null,domain:(s==null?void 0:s.domain)||"",followers:(s==null?void 0:s.followers)??(s==null?void 0:s.followers_count)??0,total_stars:(s==null?void 0:s.total_stars)??(s==null?void 0:s.stars)??0,public_repos:(s==null?void 0:s.public_repos)??(s==null?void 0:s.repo_count)??0,...t,score:z(t)};g.selectedDomain?s&&s.domain&&s.domain.includes(g.selectedDomain)&&d.push(u):d.push(u)}return d.sort((a,t)=>t.score-a.score).slice(0,g.topCount)}),C=M(()=>D.value?h.value:h.value.slice(0,5)),v=M(()=>h.value.reduce((d,l)=>d+l.total_commits,0)),b=M(()=>{var l;return(l=f.value)!=null&&l.update_time?new Date(f.value.update_time).toLocaleString("zh-CN"):"æœªçŸ¥"}),S=(d,l)=>{if(l!=null&&l.name&&l.name!=="null"&&l.name!=="undefined"&&l.name!=="None"&&l.name.trim()!=="")return l.name;if(l!=null&&l.id)return l.id;if(!d.includes("@"))return d;const _=d.match(/^([^@]+)@/);return _?_[1]:d},O=d=>d.includes("@")?null:d,z=d=>{let l=0;l+=d.total_commits;const _=d.active_days||0;_>=7?l+=10:_>=5?l+=5:_>=3&&(l+=2);const $=d.repo_count||0;$>=5?l+=5:$>=3?l+=3:$>=2&&(l+=1);const a=d.avg_commits_per_day||0;return a>=5?l+=8:a>=3?l+=5:a>=2&&(l+=2),Math.round(l)},j=d=>{k.value===d?k.value=null:k.value=d},V=async()=>{try{m.value=!0,c.value=null;const l="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),_=await fetch(l);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(d){c.value=d.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",d)}finally{m.value=!1}},A=()=>{D.value=!D.value};return Z(()=>{V()}),(d,l)=>{var _;return n(),i("div",{class:P(["weekly-commits-card leaderboard-card-base","theme-fire"])},[e("div",Re,[l[1]||(l[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-fire"},"ğŸ”¥"),e("div",null,[e("h3",{class:"title title-base"},"ä¸€å‘¨å·ç‹æ¦œ"),e("p",{class:"description description-base"},"åŸºäºæœ€è¿‘7å¤©commitæ´»åŠ¨çš„è¶…çº§å·ç‹æ’è¡Œ")])],-1)),e("div",Be,[e("span",Le,r(h.value.length),1),l[0]||(l[0]=e("span",{class:"label"},"å¤§å·ç‹",-1))])]),e("div",Fe,[e("div",Ge,[l[2]||(l[2]=e("span",{class:"time-label"},"ğŸ“… æœ€è¿‘7å¤©æ´»è·ƒæ•°æ®",-1)),e("span",Ue,r(b.value),1)])]),e("div",We,[m.value?(n(),i("div",Je,[...l[3]||(l[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½commitæ•°æ®...",-1)])])):c.value?(n(),i("div",Ze,[e("p",null,"âŒ "+r(c.value),1),e("button",{onClick:V,class:"retry-btn"},"é‡è¯•")])):h.value.length===0?(n(),i("div",Qe,[l[4]||(l[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),o.showOnlyOrgMembers?(n(),i("p",Ye,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")):(n(),i("p",Xe,"æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")),o.showOnlyOrgMembers?(n(),i("p",Ke,"ç»„ç»‡æˆå‘˜ä»¬å¿«å»å†™ä»£ç å§ï¼")):(n(),i("p",Ie,"å¿«å»å†™ä»£ç å§ï¼"))])):(n(),i("div",ts,[(n(!0),i(N,null,T(C.value,($,a)=>(n(),U(je,{key:$.user_key,member:$,rank:a+1,"animation-delay":a*100,"show-details":k.value===$.user_key,onToggleDetails:j},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),h.value.length>0?(n(),i("div",es,[e("div",ss,[e("span",null,"ğŸ† æœ¬å‘¨å·ç‹ï¼š"+r((_=h.value[0])==null?void 0:_.display_name),1),e("span",null,"ğŸ“Š æ€»commitæ•°ï¼š"+r(v.value),1)]),h.value.length>5?(n(),i("button",{key:0,onClick:A,class:"expand-btn"},[E(r(D.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:D.value}])},"â–¼",2)])):w("",!0)])):w("",!0)])}}},os=B(as,[["__scopeId","data-v-3fbcb021"]]),ns={class:"rank-badge"},ls={key:0,class:"medal"},is={key:1,class:"rank-number"},rs={class:"avatar-section"},cs=["src","alt"],ds={class:"member-info"},us={class:"name-section"},ms={class:"member-name"},gs={class:"member-meta"},hs={key:0,class:"location"},vs={key:1,class:"company"},ps={key:0,class:"domains-section"},bs={class:"domains"},ys={class:"night-chart-section"},_s={class:"night-chart"},fs=["title"],ks={class:"score-section"},$s={class:"score-value night-score"},ws={class:"score-label"},Ds={class:"detailed-stats"},Cs={key:0,class:"stat-item"},xs={class:"stat-value"},Ss={key:1,class:"stat-item"},Ms={class:"stat-value"},Os={key:2,class:"stat-item"},Ps={class:"stat-value"},Ns={class:"actions-section"},Ts=["href"],Hs={class:"popup-header"},Vs={class:"popup-content"},zs={class:"top-sections"},qs={class:"detail-section stats-section"},js={class:"detail-section analysis-section"},As={class:"night-hours-detail"},Es={class:"hour-label"},Rs={class:"hour-count"},Bs={key:0,class:"detail-section"},Ls={class:"commit-messages"},Fs=["href","title"],Gs={class:"commit-text"},Us={class:"commit-meta"},Ws={class:"repo-link"},Js={class:"night-time"},Zs={__name:"NightOwlItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(o,{emit:g}){const m=a=>a?a.split(";").map(t=>t.trim()).filter(Boolean):[],c=o,f=g,D=a=>{a.target.closest&&(a.target.closest(".github-link")||a.target.closest(".details-popup"))||f("toggle-details",c.member.user_key)},k=x(null),h=x(null),C=x("bottom"),v=[22,23,0,1,2,3,4,5],b=M(()=>{const a=c.member.name;return a&&a!=="null"&&a!=="undefined"&&a!=="None"&&a.trim()!==""?a:c.member.id?c.member.id:c.member.display_name||c.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),S=M(()=>(c.member.commit_messages||[]).filter(a=>a.is_night_owl)),O=M(()=>{const a=[],t=c.member.night_owl_commits,s=c.member.night_owl_percentage;return typeof t=="number"&&a.push(`${t} æ·±å¤œ`),typeof s=="number"&&a.push(`${s}%`),a.join(" â€¢ ")}),z=a=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[a]||a,j=a=>{if(!a)return"/default-avatar.png";const t="/members-visualization/";return a.startsWith("http")?a:`${t}${a}`.replace(/\/+/g,"/")},V=a=>{a.target.src="/default-avatar.png"},A=a=>{const t=c.member.beijing_hourly_distribution[a]||0,s=Math.max(...v.map(u=>c.member.beijing_hourly_distribution[u]||0));return s>0?t/s*100:0},d=()=>{const a=c.member.night_owl_percentage||0;return a>=50?"trend-hot":a>=30?"trend-warm":"trend-cool"},l=()=>{const a=c.member.night_owl_percentage||0;return a>=50?"â†—":a>=30?"â†’":"â†˜"},_=a=>`${a.toString().padStart(2,"0")}:00`,$=async()=>{if(!(!c.showDetails||!h.value)){await I();try{const a=h.value.closest(".commits-list");if(!a){C.value="bottom";return}const t=a.querySelectorAll(".night-owl-item"),s=Array.from(t).indexOf(h.value),u=t.length;if(s>=u-2){C.value="top";return}const y=h.value.getBoundingClientRect(),p=a.getBoundingClientRect(),H=320,q=20,R=p.bottom-y.bottom,L=y.top-p.top;R<H+q&&L>H+q?C.value="top":C.value="bottom"}catch(a){console.warn("å¼¹çª—å®šä½è®¡ç®—å¤±è´¥:",a),C.value="bottom"}}};return K(()=>c.showDetails,a=>{a&&$()},{immediate:!0}),(a,t)=>(n(),i("div",{ref_key:"itemRef",ref:h,class:P(["night-owl-item leaderboard-item-base",[`rank-${o.rank}`,{"is-expanded":c.showDetails}]]),style:F({animationDelay:`${o.animationDelay}ms`}),onClick:D},[e("div",ns,[o.rank<=3?(n(),i("span",ls,r(z(o.rank)),1)):(n(),i("span",is,r(o.rank),1))]),e("div",rs,[e("img",{src:j(o.member.avatar),alt:b.value,class:"avatar",onError:V},null,40,cs),t[1]||(t[1]=e("div",{class:"moon-indicator"},"ğŸŒ™",-1))]),e("div",ds,[e("div",us,[e("h4",ms,r(b.value),1),e("div",gs,[o.member.location?(n(),i("span",hs,"ğŸ“ "+r(o.member.location),1)):w("",!0),o.member.company?(n(),i("span",vs,"ğŸ¢ "+r(o.member.company),1)):w("",!0)])]),o.member.domain?(n(),i("div",ps,[e("div",bs,[(n(!0),i(N,null,T(m(o.member.domain),s=>(n(),i("span",{key:s,class:"domain-tag"},r(s),1))),128))])])):w("",!0)]),e("div",ys,[t[3]||(t[3]=e("div",{class:"chart-title"},"æ·±å¤œåˆ†å¸ƒ",-1)),e("div",_s,[(n(),i(N,null,T(v,s=>e("div",{key:s,class:"hour-bar",style:F({height:`${A(s)}%`}),title:`${s}:00 - ${o.member.beijing_hourly_distribution[s]||0} commits`},[...t[2]||(t[2]=[e("div",{class:"bar-fill night-bar-fill"},null,-1)])],12,fs)),64))])]),e("div",ks,[e("div",$s,r(o.member.night_owl_score),1),e("div",ws,r(O.value),1),e("div",Ds,[o.member.followers?(n(),i("div",Cs,[t[4]||(t[4]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",xs,r(o.member.followers),1)])):w("",!0),o.member.total_stars?(n(),i("div",Ss,[t[5]||(t[5]=e("span",{class:"stat-icon"},"â­",-1)),e("span",Ms,r(o.member.total_stars),1)])):w("",!0),o.member.public_repos?(n(),i("div",Os,[t[6]||(t[6]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",Ps,r(o.member.public_repos),1)])):w("",!0)]),e("div",{class:P(["trend-indicator night-trend",d()])},r(l()),3)]),e("div",Ns,[o.member.github_username?(n(),i("a",{key:0,href:`https://github.com/${o.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[7]||(t[7]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ts)):w("",!0)]),c.showDetails?(n(),i("div",{key:0,ref_key:"popupRef",ref:k,class:P(["details-popup night-popup",`popup-${C.value}`])},[e("div",Hs,[e("h5",null,r(b.value)+" çš„æ·±å¤œæˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=s=>f("toggle-details",c.member.user_key)),class:"close-btn"},"Ã—")]),e("div",Vs,[e("div",zs,[e("div",qs,[t[8]||(t[8]=e("h6",null,"ğŸŒ™ æ·±å¤œç»Ÿè®¡",-1)),e("ul",null,[e("li",null,"æ·±å¤œcommitï¼š"+r(o.member.night_owl_commits)+" ä¸ª",1),e("li",null,"æ·±å¤œæ¯”ä¾‹ï¼š"+r(o.member.night_owl_percentage)+"%",1),e("li",null,"å¤œçŒ«åˆ†æ•°ï¼š"+r(o.member.night_owl_score)+" åˆ†",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(o.member.active_days)+" å¤©",1)])]),e("div",js,[t[9]||(t[9]=e("h6",null,"ğŸ“Š æ—¶æ®µåˆ†æ",-1)),e("div",As,[(n(),i(N,null,T(v,s=>e("div",{key:s,class:"hour-detail"},[e("span",Es,r(s)+":00",1),e("span",Rs,r(o.member.beijing_hourly_distribution[s]||0),1)])),64))])])]),S.value.length?(n(),i("div",Bs,[t[12]||(t[12]=e("h6",null,"ğŸŒƒ æ·±å¤œæäº¤è®°å½•",-1)),e("div",Ls,[(n(!0),i(N,null,T(S.value.slice(0,3),s=>(n(),i("div",{key:s.url,class:"commit-message night-commit"},[e("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${s.message}`},[e("div",Gs,r(s.message),1),e("div",Us,[e("span",Ws,r(s.repo),1),t[10]||(t[10]=E(" â€¢ ",-1)),e("span",Js,r(_(s.beijing_hour)),1),E(" â€¢ "+r(s.date)+" ",1),t[11]||(t[11]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Fs)]))),128))])])):w("",!0)])],2)):w("",!0),t[13]||(t[13]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6))}},Qs=B(Zs,[["__scopeId","data-v-0cf7641f"]]),Ys={class:"card-header card-header-base"},Xs={class:"stats-badge"},Ks={class:"count"},Is={class:"update-info-section"},ta={class:"time-info"},ea={class:"update-time"},sa={class:"leaderboard-content"},aa={key:0,class:"loading-state"},oa={key:1,class:"error-state"},na={key:2,class:"empty-state"},la={key:0},ia={key:1},ra={key:2,class:"empty-hint"},ca={key:3,class:"empty-hint"},da={key:3,class:"commits-list"},ua={key:0,class:"card-footer"},ma={class:"ranking-info"},ga={__name:"NightOwlCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(o){const g=o,m=x(!1),c=x(null),f=x(null),D=x(null),k=x(!1),h=M(()=>{var _;if(!((_=f.value)!=null&&_.user_commits))return[];const d=[];let l=0;for(const[$,a]of Object.entries(f.value.user_commits))if(a.night_owl_commits>=1){const t=g.membersData.find(u=>u.id===$);if(g.showOnlyOrgMembers){const u=!!t,y=Q($,g.organizationMembers);if(l<3&&(console.log(`ğŸŒ™ æ·±å¤œçŒ«å¤´é¹°æ¦œ - æ£€æŸ¥ç”¨æˆ· ${$}:`,{hasMemberInfo:u,isOrgMember:y,hasAvatar:t==null?void 0:t.avatar,passed:u&&y}),l++),!t||!y)continue}const s={user_key:$,id:(t==null?void 0:t.id)||$,name:(t==null?void 0:t.name)||null,display_name:S($,t),github_username:O($),avatar:(t==null?void 0:t.avatar)||null,location:(t==null?void 0:t.location)||null,company:(t==null?void 0:t.company)||null,domain:(t==null?void 0:t.domain)||"",followers:(t==null?void 0:t.followers)??(t==null?void 0:t.followers_count)??0,total_stars:(t==null?void 0:t.total_stars)??(t==null?void 0:t.stars)??0,public_repos:(t==null?void 0:t.public_repos)??(t==null?void 0:t.repo_count)??0,...a,night_owl_score:z(a)};g.selectedDomain?t&&t.domain&&t.domain.includes(g.selectedDomain)&&d.push(s):d.push(s)}return d.sort(($,a)=>a.night_owl_score-$.night_owl_score)}),C=M(()=>{const d=k.value?g.topCount:Math.min(5,g.topCount);return h.value.slice(0,d)}),v=M(()=>h.value.reduce((d,l)=>d+l.night_owl_commits,0)),b=M(()=>{var d;if(!((d=f.value)!=null&&d.update_time))return"æœªçŸ¥";try{return new Date(f.value.update_time).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"æœªçŸ¥"}}),S=(d,l)=>l!=null&&l.name&&l.name!=="null"&&l.name!=="undefined"&&l.name!=="None"&&l.name.trim()!==""?l.name:l!=null&&l.id?l.id:d.includes("@")?d.split("@")[0]:d,O=d=>d.includes("@")?d.split("@")[0]:d,z=d=>{let l=0;l+=d.night_owl_commits*2;const _=d.night_owl_percentage||0;_>=50?l+=10:_>=30?l+=5:_>=20&&(l+=2);const $=d.active_days||0;$>=5?l+=8:$>=3&&(l+=4);const a=d.repo_count||0;return a>=3?l+=3:a>=2&&(l+=1),Math.round(l)},j=d=>{D.value===d?D.value=null:D.value=d},V=async()=>{try{m.value=!0,c.value=null;const l="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),_=await fetch(l);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(d){c.value=d.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",d)}finally{m.value=!1}},A=()=>{k.value=!k.value};return Z(()=>{V()}),(d,l)=>{var _;return n(),i("div",{class:P(["night-owl-card leaderboard-card-base","theme-night"])},[e("div",Ys,[l[1]||(l[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-moon"},"ğŸŒ™"),e("div",null,[e("h3",{class:"title title-base"},"å¤œçŒ«æ¦œ"),e("p",{class:"description description-base"},"æ·±å¤œæ—¶æ®µï¼ˆ22:00-06:00ï¼‰ä»£ç æäº¤æ´»è·ƒåº¦æ’è¡Œ")])],-1)),e("div",Xs,[e("span",Ks,r(h.value.length),1),l[0]||(l[0]=e("span",{class:"label"},"å¤œçŒ«å­",-1))])]),e("div",Is,[e("div",ta,[l[2]||(l[2]=e("span",{class:"time-label"},"ğŸŒƒ æœ€è¿‘7å¤©æ·±å¤œæ´»åŠ¨æ•°æ®",-1)),e("span",ea,r(b.value),1)])]),e("div",sa,[m.value?(n(),i("div",aa,[...l[3]||(l[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½å¤œçŒ«æ•°æ®...",-1)])])):c.value?(n(),i("div",oa,[e("p",null,"âŒ "+r(c.value),1),e("button",{onClick:V,class:"retry-btn"},"é‡è¯•")])):h.value.length===0?(n(),i("div",na,[l[4]||(l[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),o.showOnlyOrgMembers?(n(),i("p",la,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")):(n(),i("p",ia,"æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")),o.showOnlyOrgMembers?(n(),i("p",ra,"ç»„ç»‡æˆå‘˜ä»¬æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼")):(n(),i("p",ca,"æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼"))])):(n(),i("div",da,[(n(!0),i(N,null,T(C.value,($,a)=>(n(),U(Qs,{key:$.user_key,member:$,rank:a+1,"animation-delay":a*100,"show-details":D.value===$.user_key,onToggleDetails:j},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),h.value.length>0?(n(),i("div",ua,[e("div",ma,[e("span",null,"å¤œçŒ«ç‹ï¼š"+r((_=h.value[0])==null?void 0:_.display_name),1),e("span",null,"æ€»æ·±å¤œcommitæ•°ï¼š"+r(v.value),1)]),h.value.length>5?(n(),i("button",{key:0,onClick:A,class:"expand-btn"},[E(r(k.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:k.value}])},"â–¼",2)])):w("",!0)])):w("",!0)])}}},ha=B(ga,[["__scopeId","data-v-babd46a6"]]),va={class:"rankings-container"},pa={key:0,class:"loading-state"},ba={key:1,class:"error-state"},ya={key:2,class:"rankings-content"},_a={class:"filters-section"},fa={class:"filter-group"},ka=["value"],$a={class:"filter-group"},wa={class:"filter-group checkbox-group"},Da={class:"checkbox-label"},Ca={class:"weekly-commits-section"},xa={class:"night-owl-section"},Sa={class:"leaderboards-grid"},Ma={class:"update-info"},Oa={__name:"Rankings",setup(o){const g=x(!0),m=x(null),c=x([]),f=x(null),D=x(""),k=x(20),h=x(!1),C=x(new Set),v=M(()=>{const t=new Set;return c.value.forEach(s=>{s.domain&&s.domain.split(";").forEach(u=>t.add(u.trim()))}),Array.from(t).sort()}),b=M(()=>{let t=c.value;return D.value&&(t=t.filter(s=>s.domain&&s.domain.includes(D.value))),h.value&&(console.log("ğŸ” ç»„ç»‡æˆå‘˜ç­›é€‰å·²å¯ç”¨"),console.log(`ğŸ“‹ ç»„ç»‡æˆå‘˜åå•å¤§å°: ${C.value.size}`),console.log(`ğŸ“Š ç­›é€‰å‰æˆå‘˜æ€»æ•°: ${t.length}`),t=t.filter(s=>{const u=Q(s.id,C.value),y=!!s.avatar,p=!!s.id,H=!!s.domain;return t.indexOf(s)<3&&console.log(`  æ£€æŸ¥æˆå‘˜ ${s.id}:`,{isOrgMember:u,hasAvatar:y,hasId:p,hasDomain:H,passed:u&&y&&p&&H}),u&&y&&p&&H}),console.log(`âœ… ç­›é€‰åæˆå‘˜æ€»æ•°: ${t.length}`)),t}),S=M(()=>[{id:"popularity",title:"äººæ°”ç‹æ¦œ",description:"ç»¼åˆä¸ªäºº Followers å’Œç»„ç»‡ä»“åº“ Stars çš„å½±å“åŠ›æ’è¡Œ",icon:"ğŸ‘‘",colorScheme:"fire",showTrend:!1,data:j()},{id:"productive",title:"å¤šäº§æ¦œ",description:"åŸºäºå‚ä¸ç»„ç»‡ä»“åº“æ•°é‡çš„è´¡çŒ®å¹¿åº¦æ’è¡Œ",icon:"ğŸ†",colorScheme:"blue",showTrend:!1,data:V()},{id:"social",title:"ç¤¾äº¤è¾¾äººæ¦œ",description:"åŸºäº Following æ•°é‡çš„ç¤¾äº¤æ´»è·ƒåº¦æ’è¡Œ",icon:"ğŸ’¬",colorScheme:"green",showTrend:!1,data:A()},{id:"rising",title:"æ–°æ˜Ÿæ¦œ",description:"åŸºäºç»„ç»‡è´¡çŒ®æ´»è·ƒåº¦çš„æ½œåŠ›æ–°æ˜Ÿæ’è¡Œ",icon:"ğŸŒ ",colorScheme:"purple",showTrend:!1,data:d()},{id:"comprehensive",title:"ç»¼åˆå®åŠ›æ¦œ",description:"åŸºäºç»„ç»‡è´¡çŒ®çš„å¤šç»´åº¦ç»¼åˆè¯„åˆ†æ’è¡Œ",icon:"ğŸŒŸ",colorScheme:"gold",showTrend:!1,data:l()}]),O=M(()=>{var t;return(t=f.value)!=null&&t.update_time?new Date(f.value.update_time).toLocaleString("zh-CN"):new Date().toLocaleString("zh-CN")}),z=M(()=>{const t=new Date;return t.setDate(t.getDate()+1),t.setHours(6,0,0,0),t.toLocaleString("zh-CN")});function j(){return b.value.map(t=>({...t,score:(t.followers||0)*.6+(t.org_total_stars||0)*.4,scoreDisplay:`${t.followers||0} followers + ${t.org_total_stars||0} ç»„ç»‡stars`})).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,k.value).map((t,s)=>({...t,rank:s+1}))}function V(){return b.value.map(t=>({...t,score:t.org_repos_count||0,scoreDisplay:`å‚ä¸ ${t.org_repos_count||0} ä¸ªç»„ç»‡ä»“åº“`})).filter(t=>t.score>=1).sort((t,s)=>s.score-t.score).slice(0,k.value).map((t,s)=>({...t,rank:s+1}))}function A(){return b.value.map(t=>({...t,score:t.following||0,scoreDisplay:`å…³æ³¨ ${t.following||0} äºº`})).filter(t=>t.score>=10).sort((t,s)=>s.score-t.score).slice(0,k.value).map((t,s)=>({...t,rank:s+1}))}function d(){return b.value.map(t=>{const s=Math.max(t.org_repos_count||1,1),y=((t.followers||0)+(t.org_total_stars||0))/s*(s<5?1.5:1);return{...t,score:y,scoreDisplay:`æ´»è·ƒåº¦ ${Math.round(y)}`}}).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,k.value).map((t,s)=>({...t,rank:s+1}))}function l(){return b.value.map(t=>{const s=(t.org_total_stars||0)*.3,u=(t.followers||0)*.25,y=(t.org_repos_count||0)*.2,p=(t.following||0)*.15,H=(t.org_total_contributions||0)*.1,q=s+u+y+p+H;return{...t,score:q,scoreDisplay:`ç»¼åˆåˆ† ${Math.round(q)}`}}).filter(t=>t.score>0).sort((t,s)=>s.score-t.score).slice(0,k.value).map((t,s)=>({...t,rank:s+1}))}const _=async()=>{try{g.value=!0,m.value=null;const t="/members-visualization/",s=`${t}data/members.json`.replace(/\/+/g,"/"),u=`${t}data/commits_weekly.json`.replace(/\/+/g,"/"),[y,p]=await Promise.all([fetch(s),fetch(u)]);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const H=await y.json();c.value=H.map(R=>(Object.keys(R).forEach(L=>{let G=R[L]||"";typeof G=="string"&&(G=G.trim().replace(/^"|"$/g,"")),R[L]=G}),R)),p.ok&&(f.value=await p.json());const q=st("/data/datawhale_member.json");C.value=await Ee(q)}catch(t){m.value=t.message,console.error("åŠ è½½æ•°æ®å¤±è´¥:",t)}finally{g.value=!1}},$=()=>{},a=()=>{D.value="",h.value=!1};return Z(()=>{_()}),(t,s)=>(n(),i("div",va,[g.value?(n(),i("div",pa,[...s[3]||(s[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½æ¦œå•æ•°æ®...",-1)])])):m.value?(n(),i("div",ba,[e("p",null,"âŒ åŠ è½½å¤±è´¥: "+r(m.value),1),e("button",{onClick:_,class:"retry-btn"},"é‡è¯•")])):(n(),i("div",ya,[e("div",_a,[e("div",fa,[s[5]||(s[5]=e("label",null,"ç ”ç©¶æ–¹å‘ç­›é€‰ï¼š",-1)),W(e("select",{"onUpdate:modelValue":s[0]||(s[0]=u=>D.value=u),onChange:$},[s[4]||(s[4]=e("option",{value:""},"å…¨éƒ¨æ–¹å‘",-1)),(n(!0),i(N,null,T(v.value,u=>(n(),i("option",{key:u,value:u},r(u),9,ka))),128))],544),[[Y,D.value]])]),e("div",$a,[s[7]||(s[7]=e("label",null,"æ˜¾ç¤ºæ•°é‡ï¼š",-1)),W(e("select",{"onUpdate:modelValue":s[1]||(s[1]=u=>k.value=u),onChange:$},[...s[6]||(s[6]=[e("option",{value:10},"Top 10",-1),e("option",{value:20},"Top 20",-1),e("option",{value:50},"Top 50",-1)])],544),[[Y,k.value]])]),e("div",wa,[e("label",Da,[W(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=u=>h.value=u),onChange:$,class:"checkbox-input"},null,544),[[et,h.value]]),s[8]||(s[8]=e("span",{class:"checkbox-text"},"ä»…æ˜¾ç¤ºç»„ç»‡æˆå‘˜",-1))])]),D.value||h.value?(n(),i("button",{key:0,onClick:a,class:"clear-filters-btn"}," æ¸…é™¤ç­›é€‰ ")):w("",!0)]),e("div",Ca,[J(os,{"members-data":c.value,"selected-domain":D.value,"top-count":k.value,"show-only-org-members":h.value,"organization-members":C.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",xa,[J(ha,{"members-data":c.value,"selected-domain":D.value,"top-count":k.value,"show-only-org-members":h.value,"organization-members":C.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Sa,[(n(!0),i(N,null,T(S.value,u=>(n(),U(Jt,{key:u.id,title:u.title,description:u.description,icon:u.icon,members:u.data,"color-scheme":u.colorScheme,"show-trend":u.showTrend},null,8,["title","description","icon","members","color-scheme","show-trend"]))),128))]),e("div",Ma,[e("p",null,"ğŸ“… æ•°æ®æœ€åæ›´æ–°æ—¶é—´ï¼š"+r(O.value),1),e("p",null,"ğŸ”„ ä¸‹æ¬¡æ›´æ–°æ—¶é—´ï¼š"+r(z.value),1)])]))]))}},Pa=B(Oa,[["__scopeId","data-v-78381141"]]),Ha=JSON.parse('{"title":"ğŸ† è´¡çŒ®è€…æ¦œå•","description":"","frontmatter":{},"headers":[],"relativePath":"rankings.md","filePath":"rankings.md","lastUpdated":1764435448000}'),Na={name:"rankings.md"},Va=Object.assign(Na,{setup(o){return(g,m)=>(n(),i("div",null,[m[0]||(m[0]=e("h1",{id:"ğŸ†-è´¡çŒ®è€…æ¦œå•",tabindex:"-1"},[E("ğŸ† è´¡çŒ®è€…æ¦œå• "),e("a",{class:"header-anchor",href:"#ğŸ†-è´¡çŒ®è€…æ¦œå•","aria-label":'Permalink to "ğŸ† è´¡çŒ®è€…æ¦œå•"'},"â€‹")],-1)),m[1]||(m[1]=e("p",null,"æ¬¢è¿æ¥åˆ° Datawhale è´¡çŒ®è€…æ¦œå•é¡µé¢ï¼è¿™é‡Œå±•ç¤ºäº†åŸºäº GitHub æ•°æ®çš„å„ç§æœ‰è¶£æ’è¡Œæ¦œï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è°æ˜¯æœ€é—ªäº®çš„é‚£é¢—æ˜Ÿâ­",-1)),m[2]||(m[2]=e("h2",{id:"ğŸ“Š-å®æ—¶æ¦œå•",tabindex:"-1"},[E("ğŸ“Š å®æ—¶æ¦œå• "),e("a",{class:"header-anchor",href:"#ğŸ“Š-å®æ—¶æ¦œå•","aria-label":'Permalink to "ğŸ“Š å®æ—¶æ¦œå•"'},"â€‹")],-1)),J(Pa),m[3]||(m[3]=at("",32))]))}});export{Ha as __pageData,Va as default};
